# Telegram-–±–æ—Ç, –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞—é—â–∏–π –ø–æ–≥–æ–¥—É, –Ω–∞ –æ—Å–Ω–æ–≤–µ GigaChat-–∞–≥–µ–Ω—Ç–∞ 

## üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞

[–ü–µ—Ä–µ–π—Ç–∏ –∫ Telegram-–±–æ—Ç—É](https://t.me/gigachat_weather_agent_bot)

---

## üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**  
   ```bash
   git clone git@github.com:Molodchina/weather-agent-bot.git
   cd telegram-weather-bot
   ```
2. **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è**
	- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω:
```
cp .env.example .env
```
	- –û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```
TELEGRAM_TOKEN=<–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞>
OPENWEATHER_API_KEY=<–∫–ª—é—á_OpenWeatherMap>
REDIS_URL=redis://redis:6379/0
GIGACHAIN_API_KEY=<–∫–ª—é—á_GigaChain>
```
	- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–æ—Å–æ–±–µ–Ω–Ω–æ –ø–∞—Ä–æ–ª–∏ –∏ –∫–ª—é—á–∏) —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

3. **–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Docker –∏ Docker Compose (–≤–µ—Ä—Å–∏—è ‚â• 1.29).
```
docker-compose up --build
```
	–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Docker —Å–æ–±–µ—Ä—ë—Ç –æ–±—Ä–∞–∑—ã –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
	- redis (—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–∞–º—è—Ç–∏)
	- bot (—Å–∞–º –±–æ—Ç, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Telegram API)

---

## üìù –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–∫—Ç—ã –æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

- ü§ñ **Telegram-–±–æ—Ç, –æ—Ç–≤–µ—á–∞—é—â–∏–π –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –æ –ø–æ–≥–æ–¥–µ –±–µ–∑ —è–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥**  
  –ë–æ—Ç –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –≥–æ—Ä–æ–¥ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å ¬´–ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞?¬ª –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞, –∏ –±–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

- üß† **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å**  
  ‚Ä¢ –ö–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ (–¥–æ 20 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ–ø–ª–∏–∫).  
  ‚Ä¢ –°–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å ¬´—Å–∫—Ä–µ—â–∏–≤–∞–Ω–∏–µ¬ª –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤.

- üì¶ **DDD-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Domain-Driven Design)**  
  - `domain/` ‚Äì —Ö—ç–Ω–¥–ª–µ—Ä—ã –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π Telegram-–±–æ—Ç–∞.  
  - `application/` ‚Äì –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞: `AgentService`, `WeatherService`.  
  - `infrastructure/` ‚Äì —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏: Redis, GigaChain (LangChain), OpenWeather, –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

- ü§ñ **AI-–∞–≥–µ–Ω—Ç –Ω–∞ –±–∞–∑–µ GigaChain (LangChain)**  
  ‚Ä¢ –í –∫–∞—á–µ—Å—Ç–≤–µ system-prompt –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
  	`–í—ã –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–≥–æ–¥—ã...`.
  ‚Ä¢ –ê–≥–µ–Ω—Ç —É–º–µ–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –≥–æ—Ä–æ–¥–æ–≤ –∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º—É –≤–∏–¥—É (–¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–¥–µ–ª–∞–ª –æ–ø–µ—á–∞—Ç–∫—É –∏–ª–∏ —Å–æ–∫—Ä–∞—Ç–∏–ª –Ω–∞–∑–≤–∞–Ω–∏–µ) –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏.

- ‚òÅÔ∏è **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenWeatherMap**  
  - –ú–µ—Ç–æ–¥ `WeatherService.get_current_weather(city)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã:
    `city`, `temp`, `feels_like`, `desc`, `humidity`, `wind_speed`.
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (404, 5xx) –∏ –≤–µ–∂–ª–∏–≤—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞.

- üìä **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞**  
  –í—Å–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã (–ø—Ä–∏—ë–º —Å–æ–æ–±—â–µ–Ω–∏–π, –≤—ã–∑–æ–≤—ã LLM/OpenWeather) –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `[timestamp][LEVEL][module] <—Å–æ–æ–±—â–µ–Ω–∏–µ>`.

- üß© **aiogram 3.x**  
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–¥–∏–Ω—ã–π —Ö—ç–Ω–¥–ª–µ—Ä `@router.message()`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –∏—Ö –≤ `AgentService`.  
- –ü—Ä–∏ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö –±–æ—Ç –æ—Ç—Å—ã–ª–∞–µ—Ç generic-–æ—Ç–≤–µ—Ç: ¬´–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞...¬ª.

- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**  
- –í—Å–µ –∫–ª—é—á–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.env` (–Ω–∏–∫–∞–∫–∏—Ö —Ö–∞—Ä–¥–∫–æ–¥–æ–≤ –≤ –∫–æ–¥–µ).  
- –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞, —Ç–∞–π–º–∞—É—Ç—ã –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã, retry-–º–µ—Ö–∞–Ω–∏–∑–º—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è LLM.

- üì¶ **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**  
- –í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å `Dockerfile` (multi-stage build) –∏ `docker-compose.yml` —Å —Ç—Ä–µ–º—è —Å–µ—Ä–≤–∏—Å–∞–º–∏:
  - `postgres`
  - `redis`
  - `bot`

- üßπ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**  
- –ß–∏—Å—Ç—ã–π –∫–æ–¥ (—Å–æ–±–ª—é–¥–µ–Ω–∏–µ PEP8, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π —Ç–∏–ø–æ–≤).  
- –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–º–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.  
- CI/CD-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å (–µ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è GitHub Actions –∏–ª–∏ GitLab CI).

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–ø—Ä–∏–º–µ—Ä)
```
.
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ example.env
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ src
    ‚îú‚îÄ‚îÄ application
    ‚îÇ   ‚îú‚îÄ‚îÄ handlers.py
    ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îî‚îÄ‚îÄ texts.py
    ‚îú‚îÄ‚îÄ domain
    ‚îÇ   ‚îî‚îÄ‚îÄ services
    ‚îÇ       ‚îú‚îÄ‚îÄ agent_service.py
    ‚îÇ       ‚îî‚îÄ‚îÄ weather_service.py
    ‚îú‚îÄ‚îÄ infrastructure
    ‚îÇ   ‚îú‚îÄ‚îÄ ai
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ few_shot_examples.py
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gigachain_client.py
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îú‚îÄ‚îÄ config.py
    ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îú‚îÄ‚îÄ logging_config.py
    ‚îÇ   ‚îú‚îÄ‚îÄ redis_client.py
    ‚îÇ   ‚îî‚îÄ‚îÄ weather
    ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ       ‚îî‚îÄ‚îÄ openweather_client.py
    ‚îî‚îÄ‚îÄ main.py
```
